<!DOCTYPE html>
  <html>
  <body>
    <input id="msg" placeholder="Message">
    <button onclick="send()">Send</button>
    <pre id="log"></pre>
    <script>
      const TOKEN = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNDE5ODZkYWEtOWIxMC00Mjk2LWEwODMtMWQ4ODI0MDE3ZDg1IiwidXNlcm5hbWUiOiJ0ZXN0dXNlciIsImV4cCI6MTc2OTEyMDY1MywiaWF0IjoxNzY5MDM0MjUzfQ.M4TfZu1JLJ9q2HVE0tr9xzJrQRSEEk2IQSAjA1Zc0Bo";
      const ROOM_ID = "e92df5e8-f374-44b7-9277-17fb02dd3356";

      const ws = new WebSocket(`ws://localhost:8080/ws/${ROOM_ID}?token=${TOKEN}`);

      ws.onopen = () => log("Connected");
      ws.onmessage = (e) => {
        const data = JSON.parse(e.data);
        if (data.type === "message") {
          log(`[${data.payload.moderation_status}] ${data.payload.username}: ${data.payload.content}`);
        } else if (data.type === "moderation_update") {
          log(`Status update: ${data.payload.message_id} â†’ ${data.payload.status}`);
        }
      };
      ws.onerror = (e) => log("Error: " + e);
      ws.onclose = () => log("Disconnected");

      function send() {
        const content = document.getElementById("msg").value;
        ws.send(JSON.stringify({content}));
        document.getElementById("msg").value = "";
      }

      function log(msg) {
        document.getElementById("log").textContent += msg + "\n";
      }
    </script>
  </body>
  </html>